{"version":3,"file":"pets.js","sources":["api/pets.js"],"sourcesContent":["// API基础URL\r\nconst BASE_URL = `http://localhost:8000/api/pets`\r\n\r\nconst AVATAR_BASE_URL = `${BASE_URL}/avatar/`\r\n\r\n// 数据相关API\r\nexport const petsApi = {\r\n\t//按用户ID获取宠物\r\n\tgetPetByUserId: (params) => {\r\n\t\treturn uni.request({\r\n\t\t\turl: `${BASE_URL}`,\r\n\t\t\tmethod: 'GET',\r\n\t\t\tdata: params\r\n\t\t})\r\n\t},\r\n\t\r\n\t// 查询数据\r\n\tgetPetByPetId: (id) => {\r\n\t\treturn uni.request({\r\n\t\t\turl: `${BASE_URL}/${id}`,\r\n\t\t\tmethod: 'GET'\r\n\t\t})\r\n\t},\r\n\t// 更新数据\r\n\tupdatePet: (id, data) => {\r\n\t\treturn uni.request({\r\n\t\t\turl: `${BASE_URL}/${id}`,\r\n\t\t\tmethod: 'PUT',\r\n\t\t\tdata: data\r\n\t\t})\r\n\t},\r\n\r\n\t// 新增数据\r\n\tsavePet: (data) => {\r\n\t\treturn uni.request({\r\n\t\t\turl: `${BASE_URL}/`,\r\n\t\t\tmethod: 'POST',\r\n\t\t\tdata: data\r\n\t\t})\r\n\t},\r\n\r\n\t// 上传宠物头像\r\n\tuploadAvatar: (pet_id,filePath) => {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tuni.uploadFile({\r\n\t\t\t\turl: `${BASE_URL}/${pet_id}/avatar`,\r\n\t\t\t\tfilePath: filePath,\r\n\t\t\t\tname: 'file',\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tif (res.statusCode === 200) {\r\n\t\t\t\t\t\tresolve(JSON.parse(res.data))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treject(new Error('上传失败'))\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: (err) => {\r\n\t\t\t\t\treject(err)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t}\r\n} \r\n\r\nexport {\r\n\tAVATAR_BASE_URL,\r\n} "],"names":["uni"],"mappings":";;AACA,MAAM,WAAW;AAEZ,MAAC,kBAAkB,GAAG,QAAQ;AAGvB,MAAC,UAAU;AAAA;AAAA,EAEtB,gBAAgB,CAAC,WAAW;AAC3B,WAAOA,cAAAA,MAAI,QAAQ;AAAA,MAClB,KAAK,GAAG,QAAQ;AAAA,MAChB,QAAQ;AAAA,MACR,MAAM;AAAA,IACT,CAAG;AAAA,EACD;AAAA;AAAA,EAGD,eAAe,CAAC,OAAO;AACtB,WAAOA,cAAAA,MAAI,QAAQ;AAAA,MAClB,KAAK,GAAG,QAAQ,IAAI,EAAE;AAAA,MACtB,QAAQ;AAAA,IACX,CAAG;AAAA,EACD;AAAA;AAAA,EAED,WAAW,CAAC,IAAI,SAAS;AACxB,WAAOA,cAAAA,MAAI,QAAQ;AAAA,MAClB,KAAK,GAAG,QAAQ,IAAI,EAAE;AAAA,MACtB,QAAQ;AAAA,MACR;AAAA,IACH,CAAG;AAAA,EACD;AAAA;AAAA,EAGD,SAAS,CAAC,SAAS;AAClB,WAAOA,cAAAA,MAAI,QAAQ;AAAA,MAClB,KAAK,GAAG,QAAQ;AAAA,MAChB,QAAQ;AAAA,MACR;AAAA,IACH,CAAG;AAAA,EACD;AAAA;AAAA,EAGD,cAAc,CAAC,QAAO,aAAa;AAClC,WAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AACvCA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK,GAAG,QAAQ,IAAI,MAAM;AAAA,QAC1B;AAAA,QACA,MAAM;AAAA,QACN,SAAS,CAAC,QAAQ;AACjB,cAAI,IAAI,eAAe,KAAK;AAC3B,oBAAQ,KAAK,MAAM,IAAI,IAAI,CAAC;AAAA,UAClC,OAAY;AACN,mBAAO,IAAI,MAAM,MAAM,CAAC;AAAA,UACxB;AAAA,QACD;AAAA,QACD,MAAM,CAAC,QAAQ;AACd,iBAAO,GAAG;AAAA,QACV;AAAA,MACL,CAAI;AAAA,IACJ,CAAG;AAAA,EACD;AACF;;;"}